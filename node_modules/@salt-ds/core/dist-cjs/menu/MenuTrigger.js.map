{"version":3,"file":"MenuTrigger.js","sources":["../src/menu/MenuTrigger.tsx"],"sourcesContent":["import { type ReactNode, cloneElement, isValidElement } from \"react\";\nimport { getRefFromChildren, mergeProps, useForkRef } from \"../utils\";\nimport { useMenuContext } from \"./MenuContext\";\nimport { useMenuPanelContext } from \"./MenuPanelContext\";\nimport { MenuTriggerContext } from \"./MenuTriggerContext\";\n\nexport interface MenuTriggerProps {\n  /**\n   * The trigger element for the menu. This should be a single child element and accept a ref.\n   */\n  children?: ReactNode;\n}\n\nexport function MenuTrigger(props: MenuTriggerProps) {\n  const { children } = props;\n\n  const { getReferenceProps, refs, setFocusInside, focusInside, openState } =\n    useMenuContext();\n  const { setFocusInside: setFocusInsideParent } = useMenuPanelContext();\n\n  const handleRef = useForkRef(\n    getRefFromChildren(children),\n    refs?.setReference,\n  );\n\n  if (!children || !isValidElement(children)) {\n    // Should we log or throw error?\n    return <>{children}</>;\n  }\n\n  return (\n    <MenuTriggerContext.Provider\n      value={{ triggersSubmenu: true, blurActive: focusInside && openState }}\n    >\n      {cloneElement(children, {\n        ...mergeProps(\n          getReferenceProps({\n            onFocus() {\n              setFocusInsideParent(true);\n              setFocusInside(false);\n            },\n          }),\n          children.props,\n        ),\n        ref: handleRef,\n      })}\n    </MenuTriggerContext.Provider>\n  );\n}\n"],"names":["useMenuContext","useMenuPanelContext","useForkRef","getRefFromChildren","isValidElement","jsx","Fragment","MenuTriggerContext","mergeProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAaO,SAAS,YAAY,KAAyB,EAAA;AACnD,EAAM,MAAA,EAAE,UAAa,GAAA,KAAA,CAAA;AAErB,EAAA,MAAM,EAAE,iBAAmB,EAAA,IAAA,EAAM,gBAAgB,WAAa,EAAA,SAAA,KAC5DA,0BAAe,EAAA,CAAA;AACjB,EAAA,MAAM,EAAE,cAAA,EAAgB,oBAAqB,EAAA,GAAIC,oCAAoB,EAAA,CAAA;AAErE,EAAA,MAAM,SAAY,GAAAC,qBAAA;AAAA,IAChBC,sCAAmB,QAAQ,CAAA;AAAA,IAC3B,IAAM,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,IAAA,CAAA,YAAA;AAAA,GACR,CAAA;AAEA,EAAA,IAAI,CAAC,QAAA,IAAY,CAACC,oBAAA,CAAe,QAAQ,CAAG,EAAA;AAE1C,IAAO,uBAAAC,cAAA,CAAAC,mBAAA,EAAA;AAAA,MAAG,QAAA;AAAA,KAAS,CAAA,CAAA;AAAA,GACrB;AAEA,EACE,uBAAAD,cAAA,CAACE,sCAAmB,QAAnB,EAAA;AAAA,IACC,OAAO,EAAE,eAAA,EAAiB,IAAM,EAAA,UAAA,EAAY,eAAe,SAAU,EAAA;AAAA,IAEpE,6BAAa,QAAU,EAAA;AAAA,MACtB,GAAGC,qBAAA;AAAA,QACD,iBAAkB,CAAA;AAAA,UAChB,OAAU,GAAA;AACR,YAAA,oBAAA,CAAqB,IAAI,CAAA,CAAA;AACzB,YAAA,cAAA,CAAe,KAAK,CAAA,CAAA;AAAA,WACtB;AAAA,SACD,CAAA;AAAA,QACD,QAAS,CAAA,KAAA;AAAA,OACX;AAAA,MACA,GAAK,EAAA,SAAA;AAAA,KACN,CAAA;AAAA,GACH,CAAA,CAAA;AAEJ;;;;"}