{"version":3,"file":"useWidth.js","sources":["../src/responsive/useWidth.ts"],"sourcesContent":["import { useIsomorphicLayoutEffect } from \"@salt-ds/core\";\nimport { type RefObject, useCallback, useRef, useState } from \"react\";\nimport {\n  type ResizeHandler,\n  WidthOnly,\n  useResizeObserver,\n} from \"./useResizeObserver\";\n\nconst NONE: string[] = [];\n\nexport function useWidth<Element extends HTMLElement>(\n  responsive: boolean,\n): [RefObject<Element>, number] {\n  const [width, setWidth] = useState<number>();\n  const ref = useRef<HTMLElement>(null);\n\n  const handleResize: ResizeHandler = useCallback(({ width: newWidth }) => {\n    setWidth(newWidth);\n  }, []);\n\n  const measurementsToObserve = responsive ? WidthOnly : NONE;\n  useResizeObserver(ref, measurementsToObserve, handleResize);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!ref.current) {\n      return undefined;\n    }\n    handleResize(ref.current.getBoundingClientRect());\n  }, [handleResize]);\n\n  return [ref, width] as [RefObject<Element>, number];\n}\n"],"names":[],"mappings":";;;;AAQA,MAAM,OAAiB,EAAC,CAAA;AAEjB,SAAS,SACd,UAC8B,EAAA;AAC9B,EAAA,MAAM,CAAC,KAAA,EAAO,QAAQ,CAAA,GAAI,QAAiB,EAAA,CAAA;AAC3C,EAAM,MAAA,GAAA,GAAM,OAAoB,IAAI,CAAA,CAAA;AAEpC,EAAA,MAAM,eAA8B,WAAY,CAAA,CAAC,EAAE,KAAA,EAAO,UAAe,KAAA;AACvE,IAAA,QAAA,CAAS,QAAQ,CAAA,CAAA;AAAA,GACnB,EAAG,EAAE,CAAA,CAAA;AAEL,EAAM,MAAA,qBAAA,GAAwB,aAAa,SAAY,GAAA,IAAA,CAAA;AACvD,EAAkB,iBAAA,CAAA,GAAA,EAAK,uBAAuB,YAAY,CAAA,CAAA;AAE1D,EAAA,yBAAA,CAA0B,MAAM;AAC9B,IAAI,IAAA,CAAC,IAAI,OAAS,EAAA;AAChB,MAAO,OAAA,KAAA,CAAA,CAAA;AAAA,KACT;AACA,IAAa,YAAA,CAAA,GAAA,CAAI,OAAQ,CAAA,qBAAA,EAAuB,CAAA,CAAA;AAAA,GAClD,EAAG,CAAC,YAAY,CAAC,CAAA,CAAA;AAEjB,EAAO,OAAA,CAAC,KAAK,KAAK,CAAA,CAAA;AACpB;;;;"}