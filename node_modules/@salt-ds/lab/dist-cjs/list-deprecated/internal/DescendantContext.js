'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var jsxRuntime = require('react/jsx-runtime');
var core = require('@salt-ds/core');
var react = require('react');

const DescendantContext = react.createContext();
function DescendantProvider({ items, ...props }) {
  const assigning = react.useRef(true);
  const [, forceUpdate] = react.useState();
  core.useIsomorphicLayoutEffect(() => {
    if (assigning.current) {
      assigning.current = false;
      forceUpdate({});
    } else {
      assigning.current = true;
    }
    return () => {
      if (assigning.current) {
        items.current = [];
      }
    };
  }, [items]);
  return /* @__PURE__ */ jsxRuntime.jsx(DescendantContext.Provider, {
    ...props,
    value: { items, assigning }
  });
}
function useDescendant(descendant) {
  const { assigning, items } = react.useContext(DescendantContext);
  const index = react.useRef(-1);
  core.useIsomorphicLayoutEffect(() => {
    if (assigning.current) {
      index.current = items.current.push(descendant) - 1;
    }
  });
  return index.current;
}

exports.DescendantContext = DescendantContext;
exports.DescendantProvider = DescendantProvider;
exports.useDescendant = useDescendant;
//# sourceMappingURL=DescendantContext.js.map
