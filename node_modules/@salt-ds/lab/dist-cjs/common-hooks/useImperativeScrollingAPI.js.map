{"version":3,"file":"useImperativeScrollingAPI.js","sources":["../src/common-hooks/useImperativeScrollingAPI.ts"],"sourcesContent":["import {\n  type ForwardedRef,\n  type MutableRefObject,\n  useImperativeHandle,\n  useMemo,\n} from \"react\";\nimport type { CollectionHookResult, CollectionItem } from \"./collectionTypes\";\n\nexport interface ScrollingAPI<Item> {\n  scrollToIndex: (itemIndex: number) => void;\n  scrollToItem: (item: Item) => void;\n  scrollTo: (scrollOffset: number) => void;\n}\n\nexport interface ScrollingAPIHook<Item> {\n  collectionHook: CollectionHookResult<Item>;\n  forwardedRef?: ForwardedRef<ScrollingAPI<Item>>;\n  scrollableRef: MutableRefObject<HTMLElement | null>;\n  scrollIntoView?: (item: CollectionItem<Item>) => void;\n}\n\nconst noScrolling: ScrollingAPI<unknown> = {\n  scrollToIndex: () => undefined,\n  scrollToItem: () => undefined,\n  scrollTo: () => undefined,\n};\n\nexport const useImperativeScrollingAPI = <Item>({\n  collectionHook,\n  forwardedRef,\n  scrollableRef,\n  scrollIntoView,\n}: ScrollingAPIHook<Item>) => {\n  const scrollHandles: ScrollingAPI<Item> = useMemo(\n    () => ({\n      scrollToIndex: (itemIndex: number) => {\n        const collectionItem = collectionHook.data[itemIndex];\n        if (collectionItem) {\n          scrollIntoView?.(collectionItem);\n        }\n      },\n      scrollToItem: (item: Item) => {\n        const collectionItem = collectionHook.toCollectionItem(item);\n        if (collectionItem) {\n          scrollIntoView?.(collectionItem);\n        }\n      },\n      scrollTo: (scrollOffset: number) => {\n        if (scrollableRef?.current) {\n          scrollableRef.current.scrollTop = scrollOffset;\n        }\n      },\n    }),\n    [\n      collectionHook.data,\n      collectionHook.toCollectionItem,\n      scrollIntoView,\n      scrollableRef,\n    ],\n  );\n\n  useImperativeHandle(\n    forwardedRef,\n    () => {\n      if (scrollableRef.current) {\n        return scrollHandles;\n      }\n      return noScrolling;\n    },\n    [scrollHandles, scrollableRef],\n  );\n};\n"],"names":["useMemo","useImperativeHandle"],"mappings":";;;;;;AAqBA,MAAM,WAAqC,GAAA;AAAA,EACzC,eAAe,MAAM,KAAA,CAAA;AAAA,EACrB,cAAc,MAAM,KAAA,CAAA;AAAA,EACpB,UAAU,MAAM,KAAA,CAAA;AAClB,CAAA,CAAA;AAEO,MAAM,4BAA4B,CAAO;AAAA,EAC9C,cAAA;AAAA,EACA,YAAA;AAAA,EACA,aAAA;AAAA,EACA,cAAA;AACF,CAA8B,KAAA;AAC5B,EAAA,MAAM,aAAoC,GAAAA,aAAA;AAAA,IACxC,OAAO;AAAA,MACL,aAAA,EAAe,CAAC,SAAsB,KAAA;AACpC,QAAM,MAAA,cAAA,GAAiB,eAAe,IAAK,CAAA,SAAA,CAAA,CAAA;AAC3C,QAAA,IAAI,cAAgB,EAAA;AAClB,UAAiB,cAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,cAAA,CAAA,cAAA,CAAA,CAAA;AAAA,SACnB;AAAA,OACF;AAAA,MACA,YAAA,EAAc,CAAC,IAAe,KAAA;AAC5B,QAAM,MAAA,cAAA,GAAiB,cAAe,CAAA,gBAAA,CAAiB,IAAI,CAAA,CAAA;AAC3D,QAAA,IAAI,cAAgB,EAAA;AAClB,UAAiB,cAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,cAAA,CAAA,cAAA,CAAA,CAAA;AAAA,SACnB;AAAA,OACF;AAAA,MACA,QAAA,EAAU,CAAC,YAAyB,KAAA;AAClC,QAAA,IAAI,+CAAe,OAAS,EAAA;AAC1B,UAAA,aAAA,CAAc,QAAQ,SAAY,GAAA,YAAA,CAAA;AAAA,SACpC;AAAA,OACF;AAAA,KACF,CAAA;AAAA,IACA;AAAA,MACE,cAAe,CAAA,IAAA;AAAA,MACf,cAAe,CAAA,gBAAA;AAAA,MACf,cAAA;AAAA,MACA,aAAA;AAAA,KACF;AAAA,GACF,CAAA;AAEA,EAAAC,yBAAA;AAAA,IACE,YAAA;AAAA,IACA,MAAM;AACJ,MAAA,IAAI,cAAc,OAAS,EAAA;AACzB,QAAO,OAAA,aAAA,CAAA;AAAA,OACT;AACA,MAAO,OAAA,WAAA,CAAA;AAAA,KACT;AAAA,IACA,CAAC,eAAe,aAAa,CAAA;AAAA,GAC/B,CAAA;AACF;;;;"}