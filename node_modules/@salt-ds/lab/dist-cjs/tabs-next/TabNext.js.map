{"version":3,"file":"TabNext.js","sources":["../src/tabs-next/TabNext.tsx"],"sourcesContent":["import { makePrefixer } from \"@salt-ds/core\";\nimport { useComponentCssInjection } from \"@salt-ds/styles\";\nimport { useWindow } from \"@salt-ds/window\";\nimport {\n  type ComponentPropsWithoutRef,\n  type FocusEvent,\n  type MouseEvent,\n  type ReactElement,\n  forwardRef,\n  useEffect,\n} from \"react\";\n\nimport { OverflowItem } from \"@fluentui/react-overflow\";\nimport clsx from \"clsx\";\nimport tabCss from \"./TabNext.css\";\nimport { useTabs } from \"./TabNextContext\";\n\nconst withBaseName = makePrefixer(\"saltTabNext\");\n\nexport interface TabNextProps extends ComponentPropsWithoutRef<\"button\"> {\n  /* Value prop is mandatory and must be unique in order for overflow to work. */\n  value: string;\n}\n\nexport const TabNext = forwardRef<HTMLButtonElement, TabNextProps>(\n  function Tab(props, ref): ReactElement<TabNextProps> {\n    const {\n      children,\n      className,\n      disabled: disabledProp,\n      onClick,\n      onFocus,\n      value,\n      ...rest\n    } = props;\n    const targetWindow = useWindow();\n    useComponentCssInjection({\n      testId: \"salt-tab-next\",\n      css: tabCss,\n      window: targetWindow,\n    });\n    const {\n      activeColor,\n      isActive,\n      activate,\n      isFocusable,\n      setFocusable,\n      disabled: tabstripDisabled,\n      unregisterTab,\n      registerTab,\n      variant,\n    } = useTabs();\n    const active = isActive(value);\n    const focusable = isFocusable(value);\n    const disabled = tabstripDisabled || disabledProp;\n\n    const handleClick = (event: MouseEvent<HTMLButtonElement>) => {\n      activate(event);\n      onClick?.(event);\n    };\n\n    const handleFocus = (event: FocusEvent<HTMLButtonElement>) => {\n      setFocusable(value);\n      onFocus?.(event);\n    };\n\n    useEffect(() => {\n      registerTab({ value, label: children });\n      return () => unregisterTab(value);\n    }, [children, registerTab, unregisterTab, value]);\n\n    return (\n      <OverflowItem id={value} priority={active ? 2 : 1}>\n        <div className={withBaseName(\"wrapper\")}>\n          <button\n            className={clsx(\n              withBaseName(),\n              withBaseName(variant),\n              withBaseName(activeColor),\n              className,\n            )}\n            data-value={value}\n            aria-selected={active}\n            disabled={disabled}\n            value={value}\n            ref={ref}\n            role=\"tab\"\n            onClick={handleClick}\n            onFocus={handleFocus}\n            tabIndex={focusable && !disabled ? 0 : -1}\n            type=\"button\"\n            {...rest}\n          >\n            {children}\n          </button>\n        </div>\n      </OverflowItem>\n    );\n  },\n);\n"],"names":["makePrefixer","forwardRef","useWindow","useComponentCssInjection","tabCss","useTabs","useEffect","jsx","OverflowItem","clsx"],"mappings":"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"}